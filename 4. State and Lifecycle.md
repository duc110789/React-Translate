# State and Lifecycle

>### Phần này giới thiệu khái niệm về State và Lifecycle trong React component. Bạn cần tìm 1 [detailed component API reference here.](https://reactjs.org/docs/react-component.html).

Xem xét ticking clock từ sections trước. Trong [Rendering Elements](https://reactjs.org/docs/rendering-elements.html#rendering-an-element-into-the-dom). Chúng ta chỉ học 1 cách update UI. Chúng tôi gọi `ReactDOM.render`
thay đổi kết quả đầu ra.

```sh
    function tick() {
        const element = (
            <div>
                <h1>Hello, world!</h1>
                <h2>It is {new Date().toLocaleTimeString()}.</h2>
            </div>
        );
        ReactDOM.render(
            element,
            document.getElementById('root')
        );
    }
```

Trong section này chúng ta sẽ học cách tạo 1 component `Clock` dùng lại được và đóng gói. Nó sẽ thiết lập bộ hẹn giờ của riêng nó và update chính nó sau mỗi dây.

Chúng ta có thể bắt bởi đóng gói cách xem đồng hồ.

```sh
    function Clock(props) {
        return(
            <div>
                <h1>Hello, world!</h1>
                <h2>It is {new Date().toLocaleTimeString()}.</h2>
            </div>
        );
    }

    function Tick() {
        ReactDOM.render(
            <Clock date={new Date()} />,
            document.getElementById('root')
        );
    }
    
    setInterval(tick, 1000);
```

Tuy nhiên, nó bỏ lỡ 1 điều quan trọng: Thực tết là `Clock` thiết lập đồng hồ đếm và update UI mỗi giây phải là 1 chi tiết thực hiện của `Clock`.

Lý tưởng nhất là chúng tôi muốn viết điều này 1 lần và có update chính nó

```sh
    ReactDom.render(
        <Clock />,
        document.getElementById('root')
    );
```

Để thực hiện điều này, chúng ta cần add "State" vào component `Clock`

State giống như props, nhưng nó là private và được kiểm soát hoàn toàn bởi component.

Chúng tôi đề cập trước định nghĩa các components như classes có vài chức năng bổ sung. Local state chính xác là: 1 tính năng chỉ có sẵn cho classes.

### Converting a Function to a Classes

Bạn có thể chuyển đổi 1 functional component giống `Clock` sang 1 Class trong 5 bước

1. Tạo 1 ES6 class, với cùng tên, extends cái `React.Component`
2. Thêm 1 phương thức trống vào nó gọi là `render()`
3. Di chuyển body của function vào trong phương thức `render()`.
4. Thay thế `props` với `this.props` trong `render()` body
5. Xóa khai báo hàm rỗng còn lại

```sh
    class Clock extends React.Component {
        render() {
            <div>
                <h1>Hello World</h1>
                <h2>It is {this.props.date.toLocaleTimeString()}.</h2>
            </div>
        }
    }
```

`Clock` nó được định nghĩa như 1 lớp chứ không phải 1 hàm

Phương thức `render` sẽ được gọi mỗi lần update diễn ra. Nhưng miễn là chúng tôi render `<Clock />` trong cùng 1 DOM node,
chỉ 1 ví dụ của class `Clock` sẽ được dùng. Điều này cho phép chúng tôi được dùng bổ sung chức năng như là local state và lifecycle hooks.

### Adding Local State to a Class

Chúng ta sẽ di chuyển `date` từ props sang state trong 3 bước:
